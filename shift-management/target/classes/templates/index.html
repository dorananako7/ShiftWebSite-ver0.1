<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1週間スケジュール表</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <h1>1週間スケジュール表</h1>

    <table class="schedule-table">
        <thead>
            <tr>
                <th>時間</th>
                <th th:each="date : ${dates}" th:text="${date}"
                    th:classappend="${#strings.contains(date, '(土)') ? 'saturday' : ''} +
                                   ${#strings.contains(date, '(日)') ? 'sunday' : ''}">
                </th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="time, timeStat : ${times}">
                <th th:text="${time}"></th>
                <td th:each="date, dateStat : ${dates}">
                    <div th:with="shiftsInCell=${shiftTable[timeStat.index][dateStat.index]}">
                        <div th:each="shift : ${shiftsInCell}">
                            <a th:href="@{/shifts/{id}(id=${shift.id})}" th:text="${shift.personName}"></a>
                        </div>
                    </div>

                    <hr>

                    <form th:action="@{/shifts/add}" method="post">
                        <input type="text" name="personName" placeholder="名前" size="8">
                        <input type="hidden" name="shiftDate" th:value="${date}">
                        <input type="hidden" name="shiftTime" th:value="${time}">
                        <button type="submit">追加</button>
                    </form>
                </td>
            </tr>
        </tbody>
    </table>
</body>
</html>